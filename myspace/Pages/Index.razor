@page "/"

@using Microsoft.AspNetCore.WebUtilities
@using myspace.Extensions

@inject NavigationManager NavManager

<h1>Hello, world!</h1>

Welcome to your new app.

<button class="btn btn-primary" @onclick="GetURL" >Tryck</button>

<p>RedirectURL: @redirectURL</p>

@code {
    public string redirectURL = "";

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            GetURL();
            if (!String.IsNullOrEmpty(redirectURL))
            {
                NavManager.NavigateTo(redirectURL);
            }
        }
    }

    void GetURL()
    {
        //NavManager.TryGetQueryString<string>("redirectURL", out redirectURL);

        var queryStrings = NavManager.QueryString();

        redirectURL = queryStrings["redirectURL"];
    }
}