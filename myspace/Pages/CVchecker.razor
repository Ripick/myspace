@page "/cvcheck"

<h1> placeholder </h1>
<p> ladda upp en fil i textrutan så kommer du få ett svar på om det är mitt cv/pb eller inte... </p>

<InputFile OnChange="@SingleUpload" />



@inject Hash.Hasher _hashval
@if (filstring.Equals(_hashval.hashval) )
    {
        <p>Woop det är mitt CV!</p>
    }

@code {
    private string filstring = "";
    @using System.IO
    private async Task SingleUpload(InputFileChangeEventArgs e)
    {
       MemoryStream ms = new MemoryStream();
       await e.File.OpenReadStream().CopyToAsync(ms);

       using( System.Security.Cryptography.HashAlgorithm algorithm = System.Security.Cryptography.SHA512.Create() )
        filstring = Convert.ToBase64String(algorithm.ComputeHash(ms.ToArray()));
       //filstring = Convert.ToBase64String(Services.PageHelpers.GetHash(ms.ToString()));
       //filstring = System.Text.Encoding.UTF8.GetString(Services.PageHelpers.GetHash(ms.ToString()));
       //do something with bytes
    }
}